{"ast":null,"code":"import axios from \"axios\";\nconst {\n  createSlice,\n  createAsyncThunk\n} = require(\"@reduxjs/toolkit\");\n\n// for fetching from backend\nexport const fetchALLProjects = createAsyncThunk(\"projects/getAPI\", async () => {\n  const response = await axios.get(\"/myprojects\");\n  return response.data;\n});\n\n// adding new items\nexport const saveNewProject = createAsyncThunk(\"projects/createAPI\", async payload => {\n  const response = await axios.post(\"/projects\", payload);\n  return response.data;\n});\n// updating project\nexport const updateProject = createAsyncThunk(\"projects/updateAPI\", async payload => {\n  const response = await axios.put(`/projects/${payload.id}`, payload);\n  return response.data;\n});\n\n//instiall state \nconst initialState = {\n  projectsData: [],\n  loading: \"idle\"\n};\n\n//project slice \nconst projectslice = createSlice({\n  name: \"projects\",\n  initialState,\n  reducers: {},\n  // data fetching extra reducers ///\n  extraReducers: builder => {\n    builder.addCase(fetchALLProjects.pending, (state, action) => {\n      state.loading = \"pending\";\n    });\n    builder.addCase(fetchALLProjects.fulfilled, (state, action) => {\n      state.loading = \"idle\";\n      state.projectsData = action.payload;\n    });\n\n    //data add extra reducers\n    builder.addCase(saveNewProject.pending, (state, action) => {\n      state.loading = \"pending\";\n    });\n    builder.addCase(saveNewProject.fulfilled, (state, action) => {\n      state.loading = \"idle\";\n      state.projectsData.unshift(action.payload);\n    });\n    /////////// data add\n    builder.addCase(updateProject.pending, state => {\n      state.loading = \"pending\";\n    });\n    builder.addCase(updateProject.fulfilled, (state, action) => {\n      state.loading = \"idle\";\n      state.projectsData = state.projectsData.filter(_ => _.id !== action.payload.id);\n      state.projectsData.unshift(action.payload);\n    });\n  }\n});\nexport const getAllProjects = state => state.project.projectsData;\nexport const getLoading = state => state.project.loading;\nexport const getProjectById = id => {\n  return state => state.project.projectsData.filter(_ => _.id === id)[0];\n};\nexport default projectslice.reducer;","map":{"version":3,"names":["axios","createSlice","createAsyncThunk","require","fetchALLProjects","response","get","data","saveNewProject","payload","post","updateProject","put","id","initialState","projectsData","loading","projectslice","name","reducers","extraReducers","builder","addCase","pending","state","action","fulfilled","unshift","filter","_","getAllProjects","project","getLoading","getProjectById","reducer"],"sources":["/home/ruo/tracking-3/tracking-front/src/slice/projectslice.js"],"sourcesContent":["import axios from \"axios\";\n\nconst { createSlice, createAsyncThunk } = require(\"@reduxjs/toolkit\");\n\n // for fetching from backend\nexport const fetchALLProjects = createAsyncThunk(\"projects/getAPI\", async () => {\n  const response = await axios.get(\"/myprojects\");\n  return response.data;\n});\n\n// adding new items\nexport const saveNewProject = createAsyncThunk(\n  \"projects/createAPI\",\n  async (payload) => {\n    const response = await axios.post(\n      \"/projects\",\n      payload\n    );\n    return response.data;\n  }\n);\n// updating project\nexport const updateProject = createAsyncThunk(\"projects/updateAPI\", async (payload) => {\n  const response = await axios.put(\n    `/projects/${payload.id}`,\n    payload\n  );\n  return response.data;\n});\n\n //instiall state \nconst initialState = {\n  projectsData: [],\n  loading: \"idle\",\n};\n\n//project slice \nconst projectslice = createSlice({\n  name: \"projects\",\n  initialState,\n  reducers: {},\n  // data fetching extra reducers ///\n  extraReducers: (builder) => {\n    builder.addCase(fetchALLProjects.pending, (state, action) => {\n      state.loading = \"pending\";\n    });\n    builder.addCase(fetchALLProjects.fulfilled, (state, action) => {\n      state.loading = \"idle\";\n      state.projectsData = action.payload;\n    });\n   \n    //data add extra reducers\n    builder.addCase(saveNewProject.pending, (state, action) => {\n      state.loading = \"pending\";\n    });\n    builder.addCase(saveNewProject.fulfilled, (state, action) => {\n      state.loading = \"idle\";\n      state.projectsData.unshift(action.payload);\n    });\n /////////// data add\n builder.addCase(updateProject.pending, (state) => {\n   state.loading = \"pending\";\n });\n builder.addCase(updateProject.fulfilled, (state, action) => {\n   state.loading = \"idle\";\n   state.projectsData = state.projectsData.filter((_) => _.id !== action.payload.id);\n   state.projectsData.unshift(action.payload);\n });\n  },\n});\n\nexport const getAllProjects = (state) => state.project.projectsData;\nexport const getLoading = (state) => state.project.loading;\nexport const getProjectById = (id) => {\n  return (state) => state.project.projectsData.filter((_) => _.id === id)[0];\n};\nexport default projectslice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}